/*!
 * Spa Command v0.1.1
 * (c) 2016 Romagny13
 * Released under the MIT License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.spa=n()}(this,function(){"use strict";function e(e){return"undefined"==typeof e}function n(e){return"undefined"!=typeof e}function t(e){return"string"==typeof e}function r(e){return null!==e&&"object"==typeof e}function o(e){return"function"==typeof e}function i(e,n){if("object"==typeof e)for(var t in e){var r=n.hasOwnProperty(t);r||(n[t]=e[t])}return n}function c(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}function u(e){this.commandElements=e,this.bind=function(){c(e,function(e){e.bind()})},this.unbind=function(){c(e,function(e){e.bind()})}}function f(n,t,r,o,i,u){function f(e){o.apply(i,[{event:e,command:d,extra:u.extra}])}function a(){if(e(n))throw new Error("Html element required");if(e(t)||""==t)throw new Error("Event required");if(e(r))throw new Error("Command name required");if(e(o))throw new Error("Function required");e(i)&&(i=o),d.element=n,d.commandName=r,d.fn=o,d.context=i,d.bind()}var d=this;this.bind=function(){var e=t.split(" ");d.events=e,c(d.events,function(e){n.addEventListener(e,f)})},this.unbind=function(){c(d.events,function(e){n.removeEventListener(e,f)})},a()}function a(e){for(var n=[],t=0;t<e.length;t++){var r=document.querySelectorAll(e[t]);r&&(n=n.concat(Array.prototype.slice.call(r)))}return n}function d(e,n){for(var t=0;t<n.length;t++)if(n[t].contains(e))return!0;return!1}var s=Array.isArray,l=function(){function l(l,p,m){if(e(l))throw new Error("Command name required");if(e(p)||!o(p))throw new Error("Function required");e(m)&&(m={});var h=n(m.context)?m.context:p;if(n(m.except)&&!s(m.except))throw new Error("Except require an array of selectors");if(i(v,m),t(m.scope)?self.scope=document.querySelector(m.scope):r(m.scope)&&(self.scope=m.scope),!self.scope)throw new Error("No element found for scope");var w,y=!1;if(n(m.except)){var y=!0;w=a(m.except)}var b=[],E=m.eventAttribute,x=scope.querySelectorAll("["+E+'*="'+l+'"]');return c(x,function(e,n){if(!y||!d(e,w)){var t=e.getAttribute(E),r=t.split(";"),o=[];c(r,function(e){var n=e.split(":");if(2!=n.length)throw new Error('Invalid key value (example data-event="click:clickMethod")');var t=n[0],r=n[1];r==l&&o.push(t)}),o.length>0&&b.push(new f(e,o.join(" "),l,p,h,m))}}),new u(b)}function p(n,t){if(e(n)||!r(n))throw new Error("Object required");e(t)&&(t={}),e(t.context)&&(t.context=n);var i={};for(var c in n){var u=n[c];if(o(u)){var f=l(c,u,t);f.commandElements.length>0&&(i[c]=f)}}return i}var v={eventAttribute:"data-event",scope:"body"};return{bindCommand:l,bindCommands:p}}(),p={binder:l,version:"0.1.1"};return p});